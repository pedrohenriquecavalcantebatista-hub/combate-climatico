<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Combate √† Crise Clim√°tica ‚Äî Projeto (TCC N√≠vel M√©dio)</title>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
  :root{
    --verde:#0f9d58; --verde-esc:#0b7a42; --azul:#1463d6; --bg:#f6fbf7; --card:#ffffff; --muted:#40515a; --accent:#f59e0b;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter, "Segoe UI", Roboto, Arial, sans-serif;background:var(--bg);color:#0b2b2a;line-height:1.65}
  nav{position:sticky;top:0;background:rgba(255,255,255,0.95);backdrop-filter: blur(4px);display:flex;gap:8px;justify-content:center;padding:10px;z-index:60;border-bottom:1px solid #e8f3ea}
  nav a{color:var(--verde-esc);text-decoration:none;padding:8px 12px;border-radius:8px;font-weight:700}
  nav a:hover{background:#f0fff4}
  header{background:linear-gradient(135deg,var(--verde),#33c26c);color:white;padding:56px 18px 28px;text-align:center}
  header h1{margin:6px 0;font-size:1.5rem}
  header p{max-width:980px;margin:8px auto 0;font-size:1.0rem;opacity:0.98}
  .container{max-width:1100px;margin:22px auto;padding:0 18px}
  .card{background:var(--card);border-radius:12px;padding:18px;margin-bottom:18px;box-shadow:0 10px 30px rgba(8,12,10,0.04)}
  h2{color:var(--verde-esc);margin:0 0 12px 0;font-size:1.18rem}
  h3{margin:10px 0 8px 0}
  .lead{color:var(--muted)}
  .authors{font-size:0.95rem;margin-top:6px;color:#08323a}
  .meta{color:#025; font-weight:700; font-size:0.95rem}
  .flex{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  .galeria{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-top:12px}
  .galeria img{width:100%;height:160px;object-fit:cover;border-radius:8px;display:block}
  .figure{display:flex;gap:12px;align-items:flex-start;flex-wrap:wrap}
  .figure img{width:100%;max-width:420px;border-radius:8px;object-fit:cover}
  table{width:100%;border-collapse:collapse;margin-top:12px}
  th,td{padding:8px;border-bottom:1px solid #eef7ee;text-align:left}
  .muted{color:var(--muted)}
  .small{font-size:0.9rem;color:var(--muted)}
  .center{text-align:center}
  footer{background:var(--verde-esc);color:white;padding:16px;text-align:center;margin-top:18px}
  /* Toolbar ADM */
  .toolbar{position:fixed;right:18px;top:110px;background:rgba(255,255,255,0.98);border-radius:10px;padding:12px;box-shadow:0 12px 36px rgba(2,6,23,0.12);z-index:220;min-width:260px;display:none}
  .toolbar h4{margin:0 0 8px 0;font-size:1rem;color:#111}
  .toolbar button{display:inline-block;background:var(--verde);color:white;border:0;padding:8px 10px;border-radius:8px;margin:6px 4px;cursor:pointer}
  .toolbar .btn-muted{background:#ddd;color:#333}
  #adm-toggle{position:fixed;right:18px;bottom:18px;background:var(--accent);color:white;border:0;padding:12px 14px;border-radius:12px;font-weight:700;cursor:pointer;box-shadow:0 14px 40px rgba(2,6,23,0.18);z-index:240}
  .editable[contenteditable="true"]{outline:2px dashed var(--accent);background:#fffaf0}
  .badge{display:inline-block;padding:6px 10px;border-radius:999px;background:#f0fff4;color:var(--verde-esc);font-weight:700;margin-right:8px}
  canvas{width:100%!important;height:auto!important;border-radius:8px}
  .toc{columns:2;column-gap:20px}
  @media(max-width:980px){.toolbar{position:static;margin:12px auto;display:none}.toc{columns:1}}
</style>
</head>
<body>

<nav>
  <a href="#capa">Capa</a>
  <a href="#resumo">Resumo</a>
  <a href="#sumario">Sum√°rio</a>
  <a href="#introducao">Introdu√ß√£o</a>
  <a href="#objetivos">Objetivos</a>
  <a href="#fundamentacao">Fundamenta√ß√£o</a>
  <a href="#metodologia">Metodologia</a>
  <a href="#resultados">Resultados</a>
  <a href="#discussao">Discuss√£o</a>
  <a href="#conclusao">Conclus√£o</a>
  <a href="#referencias">Refer√™ncias</a>
  <a href="#apendice">Ap√™ndice</a>
</nav>

<header id="capa" class="card">
  <div style="max-width:980px;margin:0 auto">
    <div class="center">
      <h1 class="editable center" data-edit-id="title">Combate √† Crise Clim√°tica: A√ß√µes para Enfrentar a Mudan√ßa Global do Clima</h1>
      <p class="authors editable center" data-edit-id="authors">Caio Emanuel, Felipe Rios, Jo√£o Ricardo, Leonardo Jardim, Pedro Ant√¥nio e Pedro Henrique</p>
      <p class="meta editable center" data-edit-id="projectmeta">Projeto de pesquisa acad√™mica ‚Äî Col√©gio Alfa Cem Bil√≠ngue ‚Äî Espa√ßo Cient√≠fico</p>
      <p class="small center">RIO DE JANEIRO ‚Äî 2025</p>
    </div>
  </div>
</header>

<main class="container">

  <!-- Resumo -->
  <section id="resumo" class="card">
    <h2>Resumo</h2>
    <p class="editable lead" data-edit-id="resumo-pt">
      O presente trabalho analisou os impactos das mudan√ßas clim√°ticas em ecossistemas locais com enfoque no Brasil e avaliou o uso de jogos digitais como ferramenta educativa. A pesquisa combinou revis√£o bibliogr√°fica, desenvolvimento de cen√°rio no Minecraft Education Edition e aplica√ß√£o de question√°rio com 32 alunos do 7¬∫ ano. Os resultados indicam aumento da compreens√£o e engajamento, al√©m de sugest√µes para ampliar fases e conte√∫dos do jogo. O estudo destaca a import√¢ncia da educa√ß√£o ativa para formar cidad√£os comprometidos com pr√°ticas sustent√°veis.
    </p>

    <h3>Abstract</h3>
    <p class="editable lead" data-edit-id="resumo-en">
      This research analyzed climate change impacts on local Brazilian ecosystems and evaluated digital games as teaching tools. Methods included literature review, a Minecraft Education Edition scenario and questionnaires with 32 seventh-grade students. Results showed improved understanding and engagement, highlighting digital games as effective pedagogical tools for environmental education.
    </p>

    <p class="small"><strong>Palavras-chave:</strong> Mudan√ßas Clim√°ticas; Educa√ß√£o Ambiental; Minecraft Education Edition; Desmatamento; Sustentabilidade.</p>
  </section>

  <!-- Sum√°rio -->
  <section id="sumario" class="card">
    <h2>Sum√°rio</h2>
    <div class="toc">
      <ol>
        <li><a href="#introducao">Introdu√ß√£o</a></li>
        <li><a href="#objetivos">Objetivos</a></li>
        <li><a href="#fundamentacao">Fundamenta√ß√£o Te√≥rica</a></li>
        <li><a href="#metodologia">Metodologia</a></li>
        <li><a href="#resultados">Resultados</a></li>
        <li><a href="#discussao">Discuss√£o</a></li>
        <li><a href="#conclusao">Conclus√£o</a></li>
        <li><a href="#referencias">Refer√™ncias</a></li>
        <li><a href="#apendice">Ap√™ndice</a></li>
      </ol>
    </div>
  </section>

  <!-- INTRODU√á√ÉO -->
  <section id="introducao" class="card">
    <h2>Introdu√ß√£o</h2>
    <p class="editable lead" data-edit-id="intro">
      A Agenda 2030 e os Objetivos de Desenvolvimento Sustent√°vel (ODS) colocam a a√ß√£o clim√°tica como prioridade global. O ODS 13 orienta a integra√ß√£o de pol√≠ticas clim√°ticas em diferentes setores. Este projeto explora como jogos digitais podem ser aplicados em contextos escolares para comunicar riscos clim√°ticos e pr√°ticas sustent√°veis a partir de um estudo de caso no Col√©gio Alfa Cem Bil√≠ngue.
    </p>

    <div class="figure" style="margin-top:12px">
      <img data-img-id="intro-fig" class="replacable" src="https://upload.wikimedia.org/wikipedia/commons/6/69/Greenhouse_Effect.svg" alt="Efeito Estufa">
      <div>
        <p class="small">Figura 1 ‚Äî Esquema do efeito estufa, ilustrando gases que ret√™m radia√ß√£o t√©rmica na atmosfera.</p>
        <p class="small">Fonte: Wikimedia Commons (ilustra√ß√£o).</p>
      </div>
    </div>
  </section>

  <!-- OBJETIVOS -->
  <section id="objetivos" class="card">
    <h2>Objetivos</h2>
    <h3>Objetivo Geral</h3>
    <p class="editable" data-edit-id="obj-geral">Desenvolver um jogo educativo no Minecraft Education Edition que simule impactos de secas, desmatamento e queimadas, promovendo a compreens√£o e pr√°ticas sustent√°veis entre alunos do 7¬∫ ano.</p>
    <h3>Objetivos Espec√≠ficos</h3>
    <ul>
      <li class="editable" data-edit-id="obj1">Analisar emiss√µes de GEE por queimadas na Amaz√¥nia.</li>
      <li class="editable" data-edit-id="obj2">Avaliar engajamento e aprendizagem dos alunos.</li>
      <li class="editable" data-edit-id="obj3">Produzir material pedag√≥gico complementar.</li>
    </ul>
  </section>

  <!-- FUNDAMENTA√á√ÉO -->
  <section id="fundamentacao" class="card">
    <h2>Fundamenta√ß√£o Te√≥rica</h2>

    <h3>3.1 Mudan√ßas clim√°ticas e ecossistemas</h3>
    <p class="editable small" data-edit-id="ft1">
      O aumento das concentra√ß√µes de di√≥xido de carbono (CO‚ÇÇ), metano (CH‚ÇÑ) e √≥xidos de nitrog√™nio est√° correlacionado com a eleva√ß√£o da temperatura m√©dia global. Altera√ß√µes nos padr√µes de precipita√ß√£o, aumento de eventos extremos e mudan√ßas na fenologia de esp√©cies s√£o consequ√™ncias observadas e documentadas em relat√≥rios do IPCC, NASA e WMO.
    </p>

    <h3>3.2 Perda de biodiversidade e servi√ßos ecossist√™micos</h3>
    <p class="editable small" data-edit-id="ft2">
      A perda de habitat, aliada √†s press√µes antr√≥picas, reduz a provis√£o de servi√ßos ecossist√™micos como poliniza√ß√£o, regula√ß√£o h√≠drica e sequestro de carbono, afetando meios de subsist√™ncia locais.
    </p>

    <h3>3.3 Emiss√µes por Queimadas</h3>
    <p class="editable small" data-edit-id="ft3">
      Queimadas e desmatamento s√£o fontes significativas de emiss√£o de CO‚ÇÇ e aeross√≥is. Estimativas variam conforme tipo de biomassa queimada, intensidade do fogo e pr√°ticas de manejo. Tais emiss√µes contribuem para picos sazonais de polui√ß√£o e para a contribui√ß√£o l√≠quida de carbono na atmosfera.
    </p>

    <div class="galeria" style="margin-top:12px">
      <img data-img-id="ft-img1" class="replacable" src="https://upload.wikimedia.org/wikipedia/commons/f/f9/Amazon_rainforest.jpg" alt="Floresta Amaz√¥nica">
      <img data-img-id="ft-img2" class="replacable" src="https://upload.wikimedia.org/wikipedia/commons/5/54/Iceberg_in_Greenland.jpg" alt="Degelo Polar">
      <img data-img-id="ft-img3" class="replacable" src="https://upload.wikimedia.org/wikipedia/commons/8/80/Wind_turbines_and_sunset.jpg" alt="Energia E√≥lica">
    </div>
  </section>

  <!-- METODOLOGIA -->
  <section id="metodologia" class="card">
    <h2>Metodologia</h2>
    <p class="editable small" data-edit-id="metodo">
      O estudo utilizou abordagem mista: (i) revis√£o bibliogr√°fica sobre mudan√ßas clim√°ticas e metodologias pedag√≥gicas; (ii) desenvolvimento de cen√°rio no Minecraft Education Edition com elementos interativos (fogo controlado, seca progressiva, restaura√ß√£o de vegeta√ß√£o); (iii) aplica√ß√£o de question√°rio pr√© e p√≥s-atividade com 32 alunos do 7¬∫ ano; (iv) an√°lise qualitativa de debates e relat√≥rios de campo.
    </p>

    <h3>Desenho do jogo</h3>
    <p class="small">O mundo virtual foi dividido em biomas representativos, com scripts que simulavam perda de cobertura vegetal, redu√ß√£o do n√≠vel de √°gua e efeitos de queimadas. Os alunos foram instru√≠dos a executar atividades de restaura√ß√£o e medidas sustent√°veis como plantio de √°rvores e gest√£o de recursos.</p>

    <h3>Coleta e An√°lise</h3>
    <p class="small">Os question√°rios foram tabulados e apresentados em tabelas e gr√°ficos. As respostas abertas foram categorizadas por temas recorrentes (compreens√£o, motiva√ß√£o, sugest√µes).</p>
  </section>

  <!-- RESULTADOS -->
  <section id="resultados" class="card">
    <h2>Resultados e Discuss√£o</h2>
    <p class="editable small" data-edit-id="res-discuss">
      A maioria dos alunos (32) compreendeu o objetivo do jogo; 30 se sentiram mais conscientes; 32 relataram gostar da atividade. As respostas abertas indicaram reflex√£o sobre a√ß√µes individuais e coletivas.
    </p>

    <h3>Tabela resumo do question√°rio</h3>
    <table>
      <thead><tr><th>Pergunta</th><th>Positivas</th><th>Negativas</th><th>Observa√ß√µes</th></tr></thead>
      <tbody>
        <tr><td>1 - Entendeu o objetivo?</td><td>32</td><td>0</td><td>Compreens√£o geral</td></tr>
        <tr><td>2 - Conscientiza√ß√£o</td><td>30</td><td>2</td><td>Aprofundar fases</td></tr>
        <tr><td>3 - Gostou do jogo?</td><td>32</td><td>0</td><td>Alto engajamento</td></tr>
        <tr><td>4 - Pode ajudar outras pessoas?</td><td>32</td><td>0</td><td>Recomendado</td></tr>
      </tbody>
    </table>

    <h3>Gr√°ficos interativos</h3>
    <div style="display:grid;grid-template-columns:1fr;gap:12px">
      <div class="card">
        <h4>Resultados do Question√°rio (positivas vs negativas)</h4>
        <canvas id="chartSurvey" height="200"></canvas>
      </div>

      <div class="card">
        <h4>Anomalia de Temperatura (1880‚Äì2024, s√©rie resumida)</h4>
        <canvas id="chartTemp" height="220"></canvas>
        <p class="small">Fonte: dados consolidados (Our World in Data / NASA) ‚Äî exibidos como s√©rie resumida para apresenta√ß√£o.</p>
      </div>

      <div class="card">
        <h4>CO‚ÇÇ atmosf√©rico (ppm) ‚Äî Indicador</h4>
        <canvas id="chartCO2" height="220"></canvas>
      </div>
    </div>

    <h3>Imagens do desenvolvimento (exemplos)</h3>
    <div class="galeria">
      <img data-img-id="dev1" class="replacable" src="https://upload.wikimedia.org/wikipedia/commons/3/3a/Solar_panels_and_sky.jpg" alt="Pain√©is solares">
      <img data-img-id="dev2" class="replacable" src="https://upload.wikimedia.org/wikipedia/commons/f/f4/Hydroelectric_dam_in_Brazil.jpg" alt="Usina Hidrel√©trica">
      <img data-img-id="dev3" class="replacable" src="https://upload.wikimedia.org/wikipedia/commons/b/bb/Community_gardening_in_UK.jpg" alt="Horta Comunit√°ria">
    </div>
  </section>

  <!-- Discuss√£o -->
  <section id="discussao" class="card">
    <h2>Discuss√£o</h2>
    <p class="editable small" data-edit-id="discuss">
      Os achados corroboram literatura que indica jogos como ferramentas eficazes para aprendizagem. Limita√ß√µes incluem tamanho da amostra e aus√™ncia de acompanhamento longitudinal. Recomenda-se replica√ß√£o com turmas diversas e inclus√£o de medidas de reten√ß√£o.
    </p>

    <h3>Implica√ß√µes pedag√≥gicas</h3>
    <p class="small">Integra√ß√£o com curr√≠culo, forma√ß√£o de professores e avalia√ß√£o de compet√™ncias socioemocionais podem aumentar impacto do recurso.</p>
  </section>

  <!-- Conclus√£o -->
  <section id="conclusao" class="card">
    <h2>Conclus√£o</h2>
    <p class="editable small" data-edit-id="concl">
      O uso de Minecraft Education Edition mostrou-se promissor para educa√ß√£o ambiental. O projeto contribuiu para engajamento e compreens√£o dos estudantes sobre temas complexos, indicando caminhos para ampliar uso pedag√≥gico em disciplinas relacionadas ao meio ambiente e cidadania.
    </p>
    <h3>Recomenda√ß√µes</h3>
    <ul>
      <li class="editable" data-edit-id="rec1">Expandir amostra e repetir o estudo em outras escolas.</li>
      <li class="editable" data-edit-id="rec2">Incluir avalia√ß√µes longitudinais.</li>
      <li class="editable" data-edit-id="rec3">Integrar projetos com pol√≠ticas locais de reflorestamento.</li>
    </ul>
  </section>

  <!-- Refer√™ncias -->
  <section id="referencias" class="card">
    <h2>Refer√™ncias bibliogr√°ficas (ABNT - sele√ß√£o)</h2>
    <div class="small editable" data-edit-id="refs">
      <p>ALMEIDA, Jo√£o et al. Impactos das mudan√ßas clim√°ticas nos biomas brasileiros: Mata Atl√¢ntica e Cerrado. Revista de Ecologia e Meio Ambiente, v. XX, n. XX, 2020.</p>
      <p>BRASIL. Minist√©rio da Agricultura. Invent√°rio Nacional de Emiss√µes de Gases de Efeito Estufa 2020. Bras√≠lia: Minist√©rio da Agricultura, 2020.</p>
      <p>IPCC. Climate Change 2023: Synthesis Report. Geneva: IPCC, 2023. Dispon√≠vel em: https://www.ipcc.ch/report/ar6/syr/. Acesso em: 05 out. 2025.</p>
      <p>NASA. Global Climate Change: Vital Signs of the Planet. Dispon√≠vel em: https://climate.nasa.gov. Acesso em: 05 out. 2025.</p>
      <p>NOAA. 2024: warmest year on record. Dispon√≠vel em: https://www.noaa.gov. Acesso em: 05 out. 2025.</p>
      <p>FAO. Tackling methane emissions from livestock. Roma: FAO, 2018.</p>
    </div>
  </section>

  <!-- Ap√™ndice -->
  <section id="apendice" class="card">
    <h2>Ap√™ndice</h2>
    <h3>Question√°rio aplicado (modelo)</h3>
    <div class="small">
      <p>Qual seu nome? ________________________</p>
      <p>1) Voc√™ entendeu o objetivo do jogo? Explique: ________________________</p>
      <p>2) Voc√™ se conscientizou melhor sobre construir um futuro sustent√°vel? ( ) Sim ( ) N√£o</p>
      <p>3) Voc√™ gostou do jogo? ( ) Sim ( ) N√£o</p>
      <p>4) Voc√™ acha que o jogo pode ajudar outras pessoas a entenderem sobre polui√ß√£o e preserva√ß√£o ambiental? Justifique: ________________________</p>
      <p>5) Feedback livre: ________________________</p>
    </div>

    <h3>Tabela: Resultados resumidos</h3>
    <table>
      <thead><tr><th>Pergunta</th><th>Positivas</th><th>Negativas</th></tr></thead>
      <tbody>
        <tr><td>1</td><td>32</td><td>0</td></tr>
        <tr><td>2</td><td>30</td><td>2</td></tr>
        <tr><td>3</td><td>32</td><td>0</td></tr>
        <tr><td>4</td><td>32</td><td>0</td></tr>
      </tbody>
    </table>
  </section>

</main>

<footer>
  <div style="font-weight:700">Combate √† Crise Clim√°tica ‚Äî Projeto Acad√™mico ‚Äî Col√©gio Alfa Cem Bil√≠ngue</div>
  <div style="font-size:0.9rem;margin-top:6px">¬© 2025</div>
</footer>

<!-- TOOLBAR ADM -->
<div class="toolbar" id="toolbar" aria-hidden="true">
  <h4>Painel ADM</h4>
  <div id="img-list"></div>
  <div style="margin-top:10px" class="flex">
    <button id="saveLocal">üíæ Salvar no navegador</button>
    <button id="exportBtn">üì• Exportar HTML</button>
    <button id="pdfBtn" class="btn-muted">üñ®Ô∏è Gerar PDF</button>
    <button id="resetBtn" class="btn-muted">‚ôªÔ∏è Restaurar originais</button>
  </div>
  <p class="small" style="margin-top:8px">Ative o modo ADM (ou Ctrl+E) para editar textos; clique em uma imagem para substituir; use "Salvar no navegador" para manter altera√ß√µes; "Exportar HTML" baixa um arquivo final com tudo embutido.</p>
</div>

<button id="adm-toggle">üîß Ativar modo ADM</button>

<script>
  // ----------------- Estado inicial -----------------
  const editableEls = Array.from(document.querySelectorAll('[data-edit-id]'));
  const initialContent = {};
  editableEls.forEach(el=>{
    const id = el.dataset.editId;
    initialContent[id] = el.innerHTML;
    el.setAttribute('contenteditable', false);
  });

  // imagens substitu√≠veis
  const imageEls = Array.from(document.querySelectorAll('img.replacable, img[data-img-id]'));
  const initialImages = {};
  imageEls.forEach(img=>{
    const id = img.dataset.imgId || img.id || ('img-'+Math.random().toString(36).slice(2,8));
    img.dataset.imgId = id;
    initialImages[id] = img.src;
  });

  // build image controls in toolbar
  const imgList = document.getElementById('img-list');
  function buildImgControls(){
    imgList.innerHTML = '';
    imageEls.forEach(img=>{
      const id = img.dataset.imgId;
      const row = document.createElement('div');
      row.style.display='flex'; row.style.alignItems='center'; row.style.gap='8px'; row.style.marginBottom='8px';
      const label = document.createElement('div'); label.className='small'; label.style.flex='1'; label.textContent = id;
      const btnReset = document.createElement('button'); btnReset.textContent='Reset img'; btnReset.className='btn-muted';
      btnReset.addEventListener('click', ()=> resetImage(id));
      const btn = document.createElement('button'); btn.textContent='Substituir';
      btn.addEventListener('click', ()=> openFileDialogFor(id));
      row.appendChild(label); row.appendChild(btnReset); row.appendChild(btn);
      imgList.appendChild(row);
    });
  }
  buildImgControls();

  function openFileDialogFor(imgId){
    const input = document.createElement('input'); input.type='file'; input.accept='image/*';
    input.onchange = (ev)=>{
      const f = ev.target.files[0];
      if(!f) return;
      const reader = new FileReader();
      reader.onload = ()=> {
        const dataUrl = reader.result;
        const img = document.querySelector(`img[data-img-id="${imgId}"]`);
        if(img){ img.src = dataUrl; img.setAttribute('data-local','true'); saveToLocalStorage(); }
      };
      reader.readAsDataURL(f);
    };
    input.click();
  }

  function resetImage(imgId){
    const img = document.querySelector(`img[data-img-id="${imgId}"]`);
    if(img){ img.src = initialImages[imgId]; img.removeAttribute('data-local'); saveToLocalStorage(); }
  }

  // ADM toggle
  const admToggle = document.getElementById('adm-toggle');
  const toolbar = document.getElementById('toolbar');
  let adm = false;
  admToggle.addEventListener('click', toggleAdm);
  document.addEventListener('keydown', (e)=>{ if(e.ctrlKey && e.key.toLowerCase()==='e') toggleAdm(); });

  function toggleAdm(){
    adm = !adm;
    admToggle.textContent = adm ? '‚úÖ Modo ADM Ativo (Ctrl+E)' : 'üîß Ativar modo ADM';
    document.querySelectorAll('[data-edit-id]').forEach(el=> el.setAttribute('contenteditable', adm));
    toolbar.style.display = adm ? 'block' : 'none';
    toolbar.setAttribute('aria-hidden', adm ? 'false' : 'true');
    buildImgControls();
  }

  // Save to localStorage
  function saveToLocalStorage(){
    const texts = {};
    document.querySelectorAll('[data-edit-id]').forEach(el=>{
      texts[el.dataset.editId] = el.innerHTML;
    });
    const imgs = {};
    document.querySelectorAll('img[data-img-id]').forEach(img=>{
      imgs[img.dataset.imgId] = img.src;
    });
    const state = {texts, imgs, ts: Date.now()};
    localStorage.setItem('tcc_clima_state_v1', JSON.stringify(state));
    alert('Altera√ß√µes salvas no navegador.');
  }
  document.getElementById('saveLocal').addEventListener('click', saveToLocalStorage);

  // Restore
  function restoreFromLocalStorage(){
    try{
      const raw = localStorage.getItem('tcc_clima_state_v1');
      if(!raw) return false;
      const obj = JSON.parse(raw);
      if(obj.texts){
        Object.keys(obj.texts).forEach(id=>{
          const el = document.querySelector(`[data-edit-id="${id}"]`);
          if(el) el.innerHTML = obj.texts[id];
        });
      }
      if(obj.imgs){
        Object.keys(obj.imgs).forEach(id=>{
          const img = document.querySelector(`img[data-img-id="${id}"]`);
          if(img && obj.imgs[id]) img.src = obj.imgs[id];
        });
      }
      return true;
    }catch(e){ console.warn(e); return false; }
  }
  restoreFromLocalStorage();

  // Reset to original
  document.getElementById('resetBtn').addEventListener('click', ()=>{
    if(!confirm('Restaurar conte√∫do original?')) return;
    Object.keys(initialContent).forEach(id=>{
      const el = document.querySelector(`[data-edit-id="${id}"]`);
      if(el) el.innerHTML = initialContent[id];
    });
    Object.keys(initialImages).forEach(id=>{
      const img = document.querySelector(`img[data-img-id="${id}"]`);
      if(img) { img.src = initialImages[id]; img.removeAttribute('data-local'); }
    });
    localStorage.removeItem('tcc_clima_state_v1');
    rebuildCharts();
    alert('Restaurado ao estado original.');
  });

  // Export HTML (clone)
  document.getElementById('exportBtn').addEventListener('click', ()=>{
    const cloneDoc = document.documentElement.cloneNode(true);
    // hide toolbar and adm button
    const tb = cloneDoc.querySelector('#toolbar'); if(tb) tb.style.display='none';
    const admBtn = cloneDoc.querySelector('#adm-toggle'); if(admBtn) admBtn.style.display='none';
    // remove contenteditable attributes
    cloneDoc.querySelectorAll('[contenteditable]').forEach(n=> n.removeAttribute('contenteditable'));
    const docStr = '<!doctype html>\\n' + cloneDoc.outerHTML;
    const blob = new Blob([docStr], {type: 'text/html;charset=utf-8'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'TCC_Combate_Crise_Climaticas.html';
    document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  });

  // PDF button (open print dialog)
  document.getElementById('pdfBtn').addEventListener('click', ()=>{
    // prepare simple print view: hide toolbar & other controls via inline style
    const toolbarEl = document.getElementById('toolbar');
    const admBtn = document.getElementById('adm-toggle');
    toolbarEl.style.display = 'none';
    admBtn.style.display = 'none';
    window.print();
    // restore
    toolbarEl.style.display = adm ? 'block' : 'none';
    admBtn.style.display = 'block';
  });

  // ----------------- Charts (Chart.js) -----------------
  // Example datasets (can be replaced manually)
  const surveyLabels = ['Entendeu objetivo','Conscientiza√ß√£o','Gostou','Pode ajudar outros'];
  const surveyPositive = [32,30,32,32];
  const surveyNegative = [0,2,0,0];

  const tempYears = [1980,1990,2000,2010,2020,2024];
  const tempVals = [0.20,0.35,0.45,0.65,1.02,1.29]; // anomalies ¬∞C

  const co2Years = [1980,1990,2000,2010,2020,2024];
  const co2Vals = [338,354,369,389,412,416]; // ppm illustrative

  const ctxSurvey = document.getElementById('chartSurvey').getContext('2d');
  const surveyChart = new Chart(ctxSurvey, {
    type: 'bar',
    data: {
      labels: surveyLabels,
      datasets: [
        { label: 'Positivas', data: surveyPositive, backgroundColor:'#0f9d58' },
        { label: 'Negativas', data: surveyNegative, backgroundColor:'#f97316' }
      ]
    },
    options: { responsive:true, plugins:{ legend:{ position:'top' } }, scales:{ y:{ beginAtZero:true, ticks:{precision:0} } } }
  });

  const ctxTemp = document.getElementById('chartTemp').getContext('2d');
  const tempChart = new Chart(ctxTemp, {
    type: 'line',
    data: { labels: tempYears, datasets: [{ label:'Anomalia (¬∞C)', data: tempVals, borderColor:'#0f9d58', backgroundColor:'rgba(15,157,88,0.12)', fill:true, tension:0.25 }] },
    options: { responsive:true, plugins:{ legend:{ display:false } }, scales:{ y:{ title:{display:true,text:'ŒîT (¬∞C)'} } } }
  });

  const ctxCO2 = document.getElementById('chartCO2').getContext('2d');
  const co2Chart = new Chart(ctxCO2, {
    type: 'bar',
    data: { labels: co2Years, datasets: [{ label:'CO‚ÇÇ (ppm)', data: co2Vals, backgroundColor:'#2563eb' }] },
    options: { responsive:true, plugins:{ legend:{ display:false } }, scales:{ y:{ beginAtZero:false } } }
  });

  function rebuildCharts(){
    surveyChart.data.datasets[0].data = surveyPositive;
    surveyChart.data.datasets[1].data = surveyNegative;
    surveyChart.update();
    tempChart.data.labels = tempYears; tempChart.data.datasets[0].data = tempVals; tempChart.update();
    co2Chart.data.labels = co2Years; co2Chart.data.datasets[0].data = co2Vals; co2Chart.update();
  }

  // Quick replace-on-click when ADM active
  document.addEventListener('click', (e)=>{
    if(!adm) return;
    const t = e.target;
    if(t.tagName === 'IMG' && t.dataset.imgId){
      if(confirm('Substituir esta imagem por um arquivo local?')) openFileDialogFor(t.dataset.imgId);
    }
  });

  // Build toolbar initially (hidden)
  buildImgControls();

</script>
</body>
</html>

